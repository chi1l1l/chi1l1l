(()=>{var e={975:e=>{e.exports={parse:function(e){var t={raw:e,tags:{},prefix:null,command:null,params:[]},n=0,r=0;if(64===e.charCodeAt(0)){if(-1===(r=e.indexOf(" ")))return null;for(var a=e.slice(1,r).split(";"),s=0;s<a.length;s++){var o=a[s].split("=");t.tags[o[0]]=o[1]||!0}n=r+1}for(;32===e.charCodeAt(n);)n++;if(58===e.charCodeAt(n)){if(-1===(r=e.indexOf(" ",n)))return null;for(t.prefix=e.slice(n+1,r),n=r+1;32===e.charCodeAt(n);)n++}if(-1===(r=e.indexOf(" ",n)))return e.length>n?(t.command=e.slice(n),t):null;for(t.command=e.slice(n,r),n=r+1;32===e.charCodeAt(n);)n++;for(;n<e.length;){if(r=e.indexOf(" ",n),58===e.charCodeAt(n)){t.params.push(e.slice(n+1));break}if(-1===r){if(-1===r){t.params.push(e.slice(n));break}}else for(t.params.push(e.slice(n,r)),n=r+1;32===e.charCodeAt(n);)n++}return t}}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}(()=>{"use strict";var e=n(975),t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},t(e,n)};function r(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}function a(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,s=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(a)throw a.error}}return o}var s=function(e,t){this.target=t,this.type=e},o=function(e){function t(t,n){var r=e.call(this,"error",n)||this;return r.message=t.message,r.error=t,r}return r(t,e),t}(s),i=function(e){function t(t,n,r){void 0===t&&(t=1e3),void 0===n&&(n="");var a=e.call(this,"close",r)||this;return a.wasClean=!0,a.code=t,a.reason=n,a}return r(t,e),t}(s),c=function(){if("undefined"!=typeof WebSocket)return WebSocket},l={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+4e3*Math.random(),minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0,startClosed:!1,debug:!1};const h=function(){function e(e,t,n){var r=this;void 0===n&&(n={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(e){r._debug("open event");var t=r._options.minUptime,n=void 0===t?l.minUptime:t;clearTimeout(r._connectTimeout),r._uptimeTimeout=setTimeout((function(){return r._acceptOpen()}),n),r._ws.binaryType=r._binaryType,r._messageQueue.forEach((function(e){return r._ws.send(e)})),r._messageQueue=[],r.onopen&&r.onopen(e),r._listeners.open.forEach((function(t){return r._callEventListener(e,t)}))},this._handleMessage=function(e){r._debug("message event"),r.onmessage&&r.onmessage(e),r._listeners.message.forEach((function(t){return r._callEventListener(e,t)}))},this._handleError=function(e){r._debug("error event",e.message),r._disconnect(void 0,"TIMEOUT"===e.message?"timeout":void 0),r.onerror&&r.onerror(e),r._debug("exec error listeners"),r._listeners.error.forEach((function(t){return r._callEventListener(e,t)})),r._connect()},this._handleClose=function(e){r._debug("close event"),r._clearTimeouts(),r._shouldReconnect&&r._connect(),r.onclose&&r.onclose(e),r._listeners.close.forEach((function(t){return r._callEventListener(e,t)}))},this._url=e,this._protocols=t,this._options=n,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(e,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CONNECTING",{get:function(){return e.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OPEN",{get:function(){return e.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CLOSING",{get:function(){return e.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CLOSED",{get:function(){return e.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bufferedAmount",{get:function(){return this._messageQueue.reduce((function(e,t){return"string"==typeof t?e+=t.length:t instanceof Blob?e+=t.size:e+=t.byteLength,e}),0)+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?e.CLOSED:e.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),e.prototype.close=function(e,t){void 0===e&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),this._ws?this._ws.readyState!==this.CLOSED?this._ws.close(e,t):this._debug("close: already closed"):this._debug("close enqueued: no ws instance")},e.prototype.reconnect=function(e,t){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,this._ws&&this._ws.readyState!==this.CLOSED?(this._disconnect(e,t),this._connect()):this._connect()},e.prototype.send=function(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{var t=this._options.maxEnqueuedMessages,n=void 0===t?l.maxEnqueuedMessages:t;this._messageQueue.length<n&&(this._debug("enqueue",e),this._messageQueue.push(e))}},e.prototype.addEventListener=function(e,t){this._listeners[e]&&this._listeners[e].push(t)},e.prototype.dispatchEvent=function(e){var t,n,r=this._listeners[e.type];if(r)try{for(var a=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}(r),s=a.next();!s.done;s=a.next()){var o=s.value;this._callEventListener(e,o)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return!0},e.prototype.removeEventListener=function(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter((function(e){return e!==t})))},e.prototype._debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._options.debug&&console.log.apply(console,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e}(["RWS>"],e))},e.prototype._getNextDelay=function(){var e=this._options,t=e.reconnectionDelayGrowFactor,n=void 0===t?l.reconnectionDelayGrowFactor:t,r=e.minReconnectionDelay,a=void 0===r?l.minReconnectionDelay:r,s=e.maxReconnectionDelay,o=void 0===s?l.maxReconnectionDelay:s,i=0;return this._retryCount>0&&(i=a*Math.pow(n,this._retryCount-1))>o&&(i=o),this._debug("next delay",i),i},e.prototype._wait=function(){var e=this;return new Promise((function(t){setTimeout(t,e._getNextDelay())}))},e.prototype._getNextUrl=function(e){if("string"==typeof e)return Promise.resolve(e);if("function"==typeof e){var t=e();if("string"==typeof t)return Promise.resolve(t);if(t.then)return t}throw Error("Invalid URL")},e.prototype._connect=function(){var e=this;if(!this._connectLock&&this._shouldReconnect){this._connectLock=!0;var t=this._options,n=t.maxRetries,r=void 0===n?l.maxRetries:n,a=t.connectionTimeout,s=void 0===a?l.connectionTimeout:a,o=t.WebSocket,i=void 0===o?c():o;if(this._retryCount>=r)this._debug("max retries reached",this._retryCount,">=",r);else{if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),void 0===(h=i)||!h||2!==h.CLOSING)throw Error("No valid WebSocket class provided");var h;this._wait().then((function(){return e._getNextUrl(e._url)})).then((function(t){e._closeCalled||(e._debug("connect",{url:t,protocols:e._protocols}),e._ws=e._protocols?new i(t,e._protocols):new i(t),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout((function(){return e._handleTimeout()}),s))}))}}},e.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new o(Error("TIMEOUT"),this))},e.prototype._disconnect=function(e,t){if(void 0===e&&(e=1e3),this._clearTimeouts(),this._ws){this._removeListeners();try{this._ws.close(e,t),this._handleClose(new i(e,t,this))}catch(e){}}},e.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},e.prototype._callEventListener=function(e,t){"handleEvent"in t?t.handleEvent(e):t(e)},e.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},e.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},e.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},e}();function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}var u=/^\s+/,d=/\s+$/;function p(e,t){if(t=t||{},(e=e||"")instanceof p)return e;if(!(this instanceof p))return new p(e,t);var n=function(e){var t,n,r,a={r:0,g:0,b:0},s=1,o=null,i=null,c=null,l=!1,h=!1;return"string"==typeof e&&(e=function(e){e=e.replace(u,"").replace(d,"").toLowerCase();var t,n=!1;if(R[e])e=R[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=q.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=q.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=q.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=q.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=q.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=q.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=q.hex8.exec(e))?{r:j(t[1]),g:j(t[2]),b:j(t[3]),a:Q(t[4]),format:n?"name":"hex8"}:(t=q.hex6.exec(e))?{r:j(t[1]),g:j(t[2]),b:j(t[3]),format:n?"name":"hex"}:(t=q.hex4.exec(e))?{r:j(t[1]+""+t[1]),g:j(t[2]+""+t[2]),b:j(t[3]+""+t[3]),a:Q(t[4]+""+t[4]),format:n?"name":"hex8"}:!!(t=q.hex3.exec(e))&&{r:j(t[1]+""+t[1]),g:j(t[2]+""+t[2]),b:j(t[3]+""+t[3]),format:n?"name":"hex"}}(e)),"object"==f(e)&&(G(e.r)&&G(e.g)&&G(e.b)?(t=e.r,n=e.g,r=e.b,a={r:255*N(t,255),g:255*N(n,255),b:255*N(r,255)},l=!0,h="%"===String(e.r).substr(-1)?"prgb":"rgb"):G(e.h)&&G(e.s)&&G(e.v)?(o=P(e.s),i=P(e.v),a=function(e,t,n){e=6*N(e,360),t=N(t,100),n=N(n,100);var r=Math.floor(e),a=e-r,s=n*(1-t),o=n*(1-a*t),i=n*(1-(1-a)*t),c=r%6;return{r:255*[n,o,s,s,i,n][c],g:255*[i,n,n,o,s,s][c],b:255*[s,s,i,n,n,o][c]}}(e.h,o,i),l=!0,h="hsv"):G(e.h)&&G(e.s)&&G(e.l)&&(o=P(e.s),c=P(e.l),a=function(e,t,n){var r,a,s;function o(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=N(e,360),t=N(t,100),n=N(n,100),0===t)r=a=s=n;else{var i=n<.5?n*(1+t):n+t-n*t,c=2*n-i;r=o(c,i,e+1/3),a=o(c,i,e),s=o(c,i,e-1/3)}return{r:255*r,g:255*a,b:255*s}}(e.h,o,c),l=!0,h="hsl"),e.hasOwnProperty("a")&&(s=e.a)),s=B(s),{ok:l,format:e.format||h,r:Math.min(255,Math.max(a.r,0)),g:Math.min(255,Math.max(a.g,0)),b:Math.min(255,Math.max(a.b,0)),a:s}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}function g(e,t,n){e=N(e,255),t=N(t,255),n=N(n,255);var r,a,s=Math.max(e,t,n),o=Math.min(e,t,n),i=(s+o)/2;if(s==o)r=a=0;else{var c=s-o;switch(a=i>.5?c/(2-s-o):c/(s+o),s){case e:r=(t-n)/c+(t<n?6:0);break;case t:r=(n-e)/c+2;break;case n:r=(e-t)/c+4}r/=6}return{h:r,s:a,l:i}}function m(e,t,n){e=N(e,255),t=N(t,255),n=N(n,255);var r,a,s=Math.max(e,t,n),o=Math.min(e,t,n),i=s,c=s-o;if(a=0===s?0:c/s,s==o)r=0;else{switch(s){case e:r=(t-n)/c+(t<n?6:0);break;case t:r=(n-e)/c+2;break;case n:r=(e-t)/c+4}r/=6}return{h:r,s:a,v:i}}function b(e,t,n,r){var a=[F(Math.round(e).toString(16)),F(Math.round(t).toString(16)),F(Math.round(n).toString(16))];return r&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function _(e,t,n,r){return[F(z(r)),F(Math.round(e).toString(16)),F(Math.round(t).toString(16)),F(Math.round(n).toString(16))].join("")}function y(e,t){t=0===t?0:t||10;var n=p(e).toHsl();return n.s-=t/100,n.s=I(n.s),p(n)}function v(e,t){t=0===t?0:t||10;var n=p(e).toHsl();return n.s+=t/100,n.s=I(n.s),p(n)}function w(e){return p(e).desaturate(100)}function k(e,t){t=0===t?0:t||10;var n=p(e).toHsl();return n.l+=t/100,n.l=I(n.l),p(n)}function x(e,t){t=0===t?0:t||10;var n=p(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),p(n)}function C(e,t){t=0===t?0:t||10;var n=p(e).toHsl();return n.l-=t/100,n.l=I(n.l),p(n)}function S(e,t){var n=p(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,p(n)}function E(e){var t=p(e).toHsl();return t.h=(t.h+180)%360,p(t)}function M(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=p(e).toHsl(),r=[p(e)],a=360/t,s=1;s<t;s++)r.push(p({h:(n.h+s*a)%360,s:n.s,l:n.l}));return r}function A(e){var t=p(e).toHsl(),n=t.h;return[p(e),p({h:(n+72)%360,s:t.s,l:t.l}),p({h:(n+216)%360,s:t.s,l:t.l})]}function T(e,t,n){t=t||6,n=n||30;var r=p(e).toHsl(),a=360/n,s=[p(e)];for(r.h=(r.h-(a*t>>1)+720)%360;--t;)r.h=(r.h+a)%360,s.push(p(r));return s}function O(e,t){t=t||6;for(var n=p(e).toHsv(),r=n.h,a=n.s,s=n.v,o=[],i=1/t;t--;)o.push(p({h:r,s:a,v:s})),s=(s+i)%1;return o}p.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=B(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=m(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=m(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=g(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=g(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return b(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,a){var s=[F(Math.round(e).toString(16)),F(Math.round(t).toString(16)),F(Math.round(n).toString(16)),F(z(r))];return a&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*N(this._r,255))+"%",g:Math.round(100*N(this._g,255))+"%",b:Math.round(100*N(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*N(this._r,255))+"%, "+Math.round(100*N(this._g,255))+"%, "+Math.round(100*N(this._b,255))+"%)":"rgba("+Math.round(100*N(this._r,255))+"%, "+Math.round(100*N(this._g,255))+"%, "+Math.round(100*N(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(L[b(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+_(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var a=p(e);n="#"+_(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return p(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(k,arguments)},brighten:function(){return this._applyModification(x,arguments)},darken:function(){return this._applyModification(C,arguments)},desaturate:function(){return this._applyModification(y,arguments)},saturate:function(){return this._applyModification(v,arguments)},greyscale:function(){return this._applyModification(w,arguments)},spin:function(){return this._applyModification(S,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(T,arguments)},complement:function(){return this._applyCombination(E,arguments)},monochromatic:function(){return this._applyCombination(O,arguments)},splitcomplement:function(){return this._applyCombination(A,arguments)},triad:function(){return this._applyCombination(M,[3])},tetrad:function(){return this._applyCombination(M,[4])}},p.fromRatio=function(e,t){if("object"==f(e)){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:P(e[r]));e=n}return p(e,t)},p.equals=function(e,t){return!(!e||!t)&&p(e).toRgbString()==p(t).toRgbString()},p.random=function(){return p.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},p.mix=function(e,t,n){n=0===n?0:n||50;var r=p(e).toRgb(),a=p(t).toRgb(),s=n/100;return p({r:(a.r-r.r)*s+r.r,g:(a.g-r.g)*s+r.g,b:(a.b-r.b)*s+r.b,a:(a.a-r.a)*s+r.a})},p.readability=function(e,t){var n=p(e),r=p(t);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)},p.isReadable=function(e,t,n){var r,a,s,o,i,c=p.readability(e,t);switch(a=!1,(s=n,"AA"!==(o=((s=s||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==o&&(o="AA"),"small"!==(i=(s.size||"small").toLowerCase())&&"large"!==i&&(i="small"),r={level:o,size:i}).level+r.size){case"AAsmall":case"AAAlarge":a=c>=4.5;break;case"AAlarge":a=c>=3;break;case"AAAsmall":a=c>=7}return a},p.mostReadable=function(e,t,n){var r,a,s,o,i=null,c=0;a=(n=n||{}).includeFallbackColors,s=n.level,o=n.size;for(var l=0;l<t.length;l++)(r=p.readability(e,t[l]))>c&&(c=r,i=p(t[l]));return p.isReadable(e,i,{level:s,size:o})||!a?i:(n.includeFallbackColors=!1,p.mostReadable(e,["#fff","#000"],n))};var R=p.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},L=p.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(R);function B(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function N(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function I(e){return Math.min(1,Math.max(0,e))}function j(e){return parseInt(e,16)}function F(e){return 1==e.length?"0"+e:""+e}function P(e){return e<=1&&(e=100*e+"%"),e}function z(e){return Math.round(255*parseFloat(e)).toString(16)}function Q(e){return j(e)/255}var D,H,U,q=(H="[\\s|\\(]+("+(D="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+D+")[,|\\s]+("+D+")\\s*\\)?",U="[\\s|\\(]+("+D+")[,|\\s]+("+D+")[,|\\s]+("+D+")[,|\\s]+("+D+")\\s*\\)?",{CSS_UNIT:new RegExp(D),rgb:new RegExp("rgb"+H),rgba:new RegExp("rgba"+U),hsl:new RegExp("hsl"+H),hsla:new RegExp("hsla"+U),hsv:new RegExp("hsv"+H),hsva:new RegExp("hsva"+U),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function G(e){return!!q.CSS_UNIT.exec(e)}function J(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function W(e){return $.ajax({beforeSend:function(e){e.setRequestHeader("Authorization","Basic "+btoa("jChat:"+APIToken))},dataType:"json",url:"https://giambaj.it/twitch/api/?endpoint="+encodeURIComponent(e)})}jQuery.QueryString=function(e){let t={};for(let n=0;n<e.length;++n){let r=e[n].split("=",2);2===r.length&&(t[r[0]]=decodeURIComponent(r[1].replace(/\+/g," ")))}return t}(window.location.search.substr(1).split("&"));const V={info:{channel:null,animate:"animate"in $.QueryString&&"true"===$.QueryString.animate.toLowerCase(),showBots:"bots"in $.QueryString&&"true"===$.QueryString.bots.toLowerCase(),hideCommands:"hide_commands"in $.QueryString&&"true"===$.QueryString.hide_commands.toLowerCase(),hideBadges:"hide_badges"in $.QueryString&&"true"===$.QueryString.hide_badges.toLowerCase(),fade:"fade"in $.QueryString&&parseInt($.QueryString.fade),size:"size"in $.QueryString?parseInt($.QueryString.size):3,font:"font"in $.QueryString?parseInt($.QueryString.font):0,stroke:"stroke"in $.QueryString&&parseInt($.QueryString.stroke),shadow:"shadow"in $.QueryString&&parseInt($.QueryString.shadow),smallCaps:"small_caps"in $.QueryString&&"true"===$.QueryString.small_caps.toLowerCase(),emotes:{},badges:{},userBadges:{},ffzapBadges:null,bttvBadges:null,seventvBadges:[],chatterinoBadges:null,cheers:{},lines:[],blockedUsers:"block"in $.QueryString&&$.QueryString.block.toLowerCase().split(","),bots:["streamelements","streamlabs","nightbot","moobot","fossabot"],nicknameColor:"cN"in $.QueryString&&$.QueryString.cN},loadEmotes:function(e){V.info.emotes={},["emotes/global","users/twitch/"+encodeURIComponent(e)].forEach((e=>{$.getJSON("https://api.betterttv.net/3/cached/frankerfacez/"+e).done((function(e){e.forEach((e=>{if(e.images["4x"])var t=e.images["4x"],n=!1;else t=e.images["2x"]||e.images["1x"],n=!0;V.info.emotes[e.code]={id:e.id,image:t,upscale:n}}))}))})),["emotes/global","users/twitch/"+encodeURIComponent(e)].forEach((e=>{$.getJSON("https://api.betterttv.net/3/cached/"+e).done((function(e){Array.isArray(e)||(e=e.channelEmotes.concat(e.sharedEmotes)),e.forEach((e=>{V.info.emotes[e.code]={id:e.id,image:"https://cdn.betterttv.net/emote/"+e.id+"/3x",zeroWidth:["5e76d338d6581c3724c0f0b2","5e76d399d6581c3724c0f0b8","567b5b520e984428652809b6","5849c9a4f52be01a7ee5f79d","567b5c080e984428652809ba","567b5dc00e984428652809bd","58487cc6f52be01a7ee5f205","5849c9c8f52be01a7ee5f79e"].includes(e.id)}}))}))})),$.getJSON("https://7tv.io/v3/emote-sets/global").done((e=>{e?.emotes?.forEach((e=>{const t=e.data.host.files.pop();V.info.emotes[e.name]={id:e.id,image:`https:${e.data.host.url}/${t.name}`,zeroWidth:256==e.data.flags}}))})),$.getJSON("https://7tv.io/v3/users/twitch/"+encodeURIComponent(e)).done((e=>{e?.emote_set?.emotes?.forEach((e=>{const t=e.data.host.files.pop();V.info.emotes[e.name]={id:e.id,image:`https:${e.data.host.url}/${t.name}`,zeroWidth:256==e.data.flags}}))}))},load:function(e){W("/users?login="+V.info.channel).done((function(t){switch(t=t.data[0],V.info.channelID=t.id,V.loadEmotes(V.info.channelID),V.info.size){case 1:$("<link/>",{rel:"stylesheet",type:"text/css",href:"styles/size_small.css"}).appendTo("head");break;case 2:$("<link/>",{rel:"stylesheet",type:"text/css",href:"styles/size_medium.css"}).appendTo("head");break;default:$("<link/>",{rel:"stylesheet",type:"text/css",href:"styles/size_large.css"}).appendTo("head")}switch(V.info.font){case 1:$("<link/>",{rel:"stylesheet",type:"text/css",href:"styles/font_SegoeUI.css"}).appendTo("head");break;case 2:$("<link/>",{rel:"stylesheet",type:"text/css",href:"styles/font_Roboto.css"}).appendTo("head");break;case 3:$("<link/>",{rel:"stylesheet",type:"text/css",href:"styles/font_Lato.css"}).appendTo("head");break;case 4:$("<link/>",{rel:"stylesheet",type:"text/css",href:"styles/font_NotoSans.css"}).appendTo("head");break;case 5:$("<link/>",{rel:"stylesheet",type:"text/css",href:"styles/font_SourceCodePro.css"}).appendTo("head");break;case 6:$("<link/>",{rel:"stylesheet",type:"text/css",href:"styles/font_Impact.css"}).appendTo("head");break;case 7:$("<link/>",{rel:"stylesheet",type:"text/css",href:"styles/font_Comfortaa.css"}).appendTo("head");break;case 8:$("<link/>",{rel:"stylesheet",type:"text/css",href:"styles/font_DancingScript.css"}).appendTo("head");break;case 9:$("<link/>",{rel:"stylesheet",type:"text/css",href:"styles/font_IndieFlower.css"}).appendTo("head");break;case 10:$("<link/>",{rel:"stylesheet",type:"text/css",href:"styles/font_PressStart2P.css"}).appendTo("head");break;case 11:$("<link/>",{rel:"stylesheet",type:"text/css",href:"styles/font_Wallpoet.css"}).appendTo("head");break;default:$("<link/>",{rel:"stylesheet",type:"text/css",href:"styles/font_BalooTammudu.css"}).appendTo("head")}if(V.info.stroke)switch(V.info.stroke){case 1:$("<link/>",{rel:"stylesheet",type:"text/css",href:"styles/stroke_thin.css"}).appendTo("head");break;case 2:$("<link/>",{rel:"stylesheet",type:"text/css",href:"styles/stroke_medium.css"}).appendTo("head");break;case 3:$("<link/>",{rel:"stylesheet",type:"text/css",href:"styles/stroke_thick.css"}).appendTo("head");break;case 4:$("<link/>",{rel:"stylesheet",type:"text/css",href:"styles/stroke_thicker.css"}).appendTo("head")}if(V.info.shadow)switch(V.info.shadow){case 1:$("<link/>",{rel:"stylesheet",type:"text/css",href:"styles/shadow_small.css"}).appendTo("head");break;case 2:$("<link/>",{rel:"stylesheet",type:"text/css",href:"styles/shadow_medium.css"}).appendTo("head");break;case 3:$("<link/>",{rel:"stylesheet",type:"text/css",href:"styles/shadow_large.css"}).appendTo("head")}V.info.smallCaps&&$("<link/>",{rel:"stylesheet",type:"text/css",href:"styles/variant_SmallCaps.css"}).appendTo("head"),W("/chat/badges/global").done((function(e){e?.data.forEach((e=>{e?.versions.forEach((t=>{V.info.badges[e.set_id+":"+t.id]=t.image_url_4x}))})),W("/chat/badges?broadcaster_id="+V.info.channelID).done((function(e){e?.data.forEach((e=>{e?.versions.forEach((t=>{V.info.badges[e.set_id+":"+t.id]=t.image_url_4x}))})),$.getJSON("https://api.frankerfacez.com/v1/_room/id/"+encodeURIComponent(V.info.channelID)).done((function(e){e.room.moderator_badge&&(V.info.badges["moderator:1"]="https://cdn.frankerfacez.com/room-badge/mod/"+V.info.channel+"/4/rounded"),e.room.vip_badge&&(V.info.badges["vip:1"]="https://cdn.frankerfacez.com/room-badge/vip/"+V.info.channel+"/4")}))}))})),V.info.hideBadges||($.getJSON("https://api.ffzap.com/v1/supporters").done((function(e){V.info.ffzapBadges=e})).fail((function(){V.info.ffzapBadges=[]})),$.getJSON("https://api.betterttv.net/3/cached/badges").done((function(e){V.info.bttvBadges=e})).fail((function(){V.info.bttvBadges=[]})),$.getJSON("https://api.chatterino.com/badges").done((function(e){V.info.chatterinoBadges=e.badges})).fail((function(){V.info.chatterinoBadges=[]}))),W("/bits/cheermotes?broadcaster_id="+V.info.channelID).done((function(e){(e=e.data).forEach((e=>{V.info.cheers[e.prefix]={},e.tiers.forEach((t=>{V.info.cheers[e.prefix][t.min_bits]={image:t.images.dark.animated[4],color:t.color}}))}))})),e(!0)}))},update:setInterval((function(){if(V.info.lines.length>0){var e=V.info.lines.join("");if(V.info.animate){var t=$("<div></div>",{class:"hidden"}).appendTo("#chat_container");t.append(e);var n=t.height();t.remove();var r=$("<div></div>");$("#chat_container").append(r),r.animate({height:n},150,(function(){$(this).remove(),$("#chat_container").append(e)}))}else $("#chat_container").append(e);V.info.lines=[];for(var a=$(".chat_line").length-100;a>0;)$(".chat_line").eq(0).remove(),a--}else if(V.info.fade){var s=$(".chat_line").eq(0).data("time");(Date.now()-s)/1e3>=V.info.fade&&$(".chat_line").eq(0).fadeOut((function(){$(this).remove()}))}}),200),loadUserBadges:function(e,t){if(V.info.userBadges[e]=[],"giambaj"===e){var n={description:"jChat Dev",url:"https://www.giambaj.it/twitch/jchat/img/peepoHappyBadge.png"};V.info.userBadges[e].includes(n)||V.info.userBadges[e].push(n)}$.getJSON("https://api.frankerfacez.com/v1/user/"+e).always((function(n){n.badges&&Object.entries(n.badges).forEach((t=>{var n={description:t[1].title,url:t[1].urls[4],color:t[1].color};V.info.userBadges[e].includes(n)||V.info.userBadges[e].push(n)})),V.info.ffzapBadges.forEach((n=>{if(n.id.toString()===t){var r="#755000";2==n.tier?r=n.badge_color||"#755000":3==n.tier&&(r=0==n.badge_is_colored&&(n.badge_color||"#755000"));var a={description:"FFZ:AP Badge",url:"https://api.ffzap.com/v1/user/badge/"+t+"/3",color:r};V.info.userBadges[e].includes(a)||V.info.userBadges[e].push(a)}})),V.info.bttvBadges.forEach((t=>{if(t.name===e){var n={description:t.badge.description,url:t.badge.svg};V.info.userBadges[e].includes(n)||V.info.userBadges[e].push(n)}})),V.info.seventvBadges.forEach((t=>{t.users.forEach((n=>{if(n===e){var r={description:t.tooltip,url:t.urls[2][1]};V.info.userBadges[e].includes(r)||V.info.userBadges[e].push(r)}}))})),V.info.chatterinoBadges.forEach((n=>{n.users.forEach((r=>{if(r===t){var a={description:n.tooltip,url:n.image3||n.image2||n.image1};V.info.userBadges[e].includes(a)||V.info.userBadges[e].push(a)}}))}))}))},write:function(e,t,n){if(t){var r=$("<div></div>");r.addClass("chat_line"),r.attr("data-nick",e),r.attr("data-time",Date.now()),r.attr("data-id",t.id);var a=$("<span></span>");if(a.addClass("user_info"),V.info.hideBadges)"string"==typeof t.badges&&t.badges.split(",").forEach((e=>{var t=$("<img/>");t.addClass("badge"),e=e.split("/"),t.attr("src",V.info.badges[e[0]+":"+e[1]]),a.append(t)}));else{var s=[];const n=["predictions","admin","global_mod","staff","twitchbot","broadcaster","moderator","vip"];var o;"string"==typeof t.badges&&t.badges.split(",").forEach((e=>{e=e.split("/");var t=!!n.includes(e[0]);s.push({description:e[0],url:V.info.badges[e[0]+":"+e[1]],priority:t})})),s.forEach((e=>{if(e.priority){var t=$("<img/>");t.addClass("badge"),t.attr("src",e.url),"moderator"===e.description&&(o=t),a.append(t)}})),V.info.userBadges[e]&&V.info.userBadges[e].forEach((e=>{var n=$("<img/>");n.addClass("badge"),e.color&&n.css("background-color",e.color),"Bot"===e.description&&"1"===t.mod&&(n.css("background-color","rgb(0, 173, 3)"),o.remove()),n.attr("src",e.url),a.append(n)})),s.forEach((e=>{if(!e.priority){var t=$("<img/>");t.addClass("badge"),t.attr("src",e.url),a.append(t)}}))}var i=$("<span></span>");if(i.addClass("nick"),V.info.nicknameColor)var c=V.info.nicknameColor;else c="string"==typeof t.color?p(t.color).getBrightness()<=50?p(t.color).lighten(30):t.color:["#FF0000","#0000FF","#008000","#B22222","#FF7F50","#9ACD32","#FF4500","#2E8B57","#DAA520","#D2691E","#5F9EA0","#1E90FF","#FF69B4","#8A2BE2","#00FF7F"][e.charCodeAt(0)%15];i.css("color",c),i.html(t["display-name"]?t["display-name"]:e),a.append(i);var l=$("<span></span>");l.addClass("message"),/^\x01ACTION.*\x01$/.test(n)?(l.css("color",c),n=n.replace(/^\x01ACTION/,"").replace(/\x01$/,"").trim(),a.append("<span>&nbsp;</span>")):a.append('<span class="colon">:</span>'),r.append(a);var h={};if("string"==typeof t.emotes&&t.emotes.split("/").forEach((e=>{var t=e.split(":"),r=t[1].split(",")[0].split("-"),a=new RegExp("[က-￿]+","g"),s=n.replace(a," ").substr(r[0],r[1]-r[0]+1);h[s]='<img class="emote" src="https://static-cdn.jtvnw.net/emoticons/v2/'+t[0]+'/default/dark/3.0" />'})),Object.entries(V.info.emotes).forEach((e=>{n.search(J(e[0]))>-1&&(e[1].upscale?h[e[0]]='<img class="emote upscale" src="'+e[1].image+'" />':e[1].zeroWidth?h[e[0]]='<img class="emote" data-zw="true" src="'+e[1].image+'" />':h[e[0]]='<img class="emote" src="'+e[1].image+'" />')})),n=function(e){return e.replace(/&/g,"&amp;").replace(/(<)(?!3)/g,"&lt;").replace(/(>)(?!\()/g,"&gt;")}(n),t.bits&&parseInt(t.bits)>0){var f=parseInt(t.bits),u=!1;for(cheerType of Object.entries(V.info.cheers)){var d=new RegExp(cheerType[0]+"\\d+\\s*","ig");if(n.search(d)>-1&&(n=n.replace(d,""),!u)){var g=1;for(cheerTier of Object.keys(cheerType[1]).map(Number).sort(((e,t)=>e-t))){if(!(f>=cheerTier))break;g=cheerTier}n='<img class="cheer_emote" src="'+cheerType[1][g].image+'" /><span class="cheer_bits" style="color: '+cheerType[1][g].color+';">'+f+"</span> "+n,u=!0}}}var m=Object.keys(h);m.sort((function(e,t){return t.length-e.length})),m.forEach((e=>{var t=new RegExp("(?<!\\S)("+J(e)+")(?!\\S)","g");n=n.replace(t,h[e])})),n=twemoji.parse(n,{base:"https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/"}),l.html(n);const b=l.children();b.each((function(e){if(0!=e&&$(this).data("zw")&&($(b[e-1]).hasClass("emote")||$(b[e-1]).hasClass("emoji"))&&!$(b[e-1]).data("zw")){var t=$("<span></span>");t.addClass("zero-width_container"),$(this).addClass("zero-width"),$(this).before(t),t.append(b[e-1],this)}})),l.html(l.html().trim()),r.append(l),V.info.lines.push(r.wrap("<div>").parent().html())}},clearChat:function(e){setTimeout((function(){$(".chat_line[data-nick="+e+"]").remove()}),100)},clearMessage:function(e){setTimeout((function(){$(".chat_line[data-id="+e+"]").remove()}),100)},trollMessage:function(){V.write("enkk",{badges:"broadcaster/1,subscriber/12,partner/1",color:"#e05b5b","display-name":"Enkk"},"Grazie giambaJ per questa chat bellissima PepeLaugh PepoG")},connect:function(t){V.info.channel=t;var n=$(document).prop("title");$(document).prop("title",n+V.info.channel),V.load((function(){console.log("jChat: Connecting to IRC server...");var n=new h("wss://irc-ws.chat.twitch.tv","irc",{reconnectInterval:2e3});"enkk"===V.info.channel&&setInterval(V.trollMessage,18e5),n.onopen=function(){console.log("jChat: Connected"),n.send("PASS blah\r\n"),n.send("NICK justinfan"+Math.floor(99999*Math.random())+"\r\n"),n.send("CAP REQ :twitch.tv/commands twitch.tv/tags\r\n"),n.send("JOIN #"+V.info.channel+"\r\n")},n.onclose=function(){console.log("jChat: Disconnected")},n.onmessage=function(r){r.data.split("\r\n").forEach((r=>{if(r){var a=(0,e.parse)(r);if(a.command)switch(a.command){case"PING":return void n.send("PONG "+a.params[0]);case"JOIN":return void console.log("jChat: Joined channel #"+V.info.channel);case"CLEARMSG":return void(a.tags&&V.clearMessage(a.tags["target-msg-id"]));case"CLEARCHAT":return void(a.params[1]&&V.clearChat(a.params[1]));case"PRIVMSG":if(a.params[0]!=="#"+t||!a.params[1])return;var s=a.prefix.split("@")[0].split("!")[0];if("!refreshoverlay"===a.params[1].toLowerCase()&&"string"==typeof a.tags.badges){var o=!1;if(a.tags.badges.split(",").forEach((e=>{"moderator"!==(e=e.split("/"))[0]&&"broadcaster"!==e[0]||(o=!0)})),o)return V.loadEmotes(V.info.channelID),void console.log("jChat: Refreshing emotes...")}if("!reloadchat"===a.params[1].toLowerCase()&&"string"==typeof a.tags.badges&&(o=!1,a.tags.badges.split(",").forEach((e=>{"moderator"!==(e=e.split("/"))[0]&&"broadcaster"!==e[0]||(o=!0)})),o&&location.reload()),V.info.hideCommands&&/^!.+/.test(a.params[1]))return;if(!V.info.showBots&&V.info.bots.includes(s))return;if(V.info.blockedUsers&&V.info.blockedUsers.includes(s))return;return V.info.hideBadges||V.info.bttvBadges&&V.info.seventvBadges&&V.info.chatterinoBadges&&V.info.ffzapBadges&&!V.info.userBadges[s]&&V.loadUserBadges(s,a.tags["user-id"]),void V.write(s,a.tags,a.params[1])}}}))}}))}};$(document).ready((function(){V.connect($.QueryString.channel?$.QueryString.channel.toLowerCase():"giambaj")}))})()})();